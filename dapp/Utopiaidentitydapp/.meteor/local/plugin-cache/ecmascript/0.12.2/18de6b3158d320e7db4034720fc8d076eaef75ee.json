{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/innotical/Utopia/dapp/Utopiaidentitydapp/imports/ui/pages/main/result.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/ui/pages/main/result.js","filename":"/home/innotical/Utopia/dapp/Utopiaidentitydapp/imports/ui/pages/main/result.js","passPerPreset":false,"envName":"development","cwd":"/home/innotical/Utopia/dapp/Utopiaidentitydapp","root":"/home/innotical/Utopia/dapp/Utopiaidentitydapp","generatorOpts":{"filename":"/home/innotical/Utopia/dapp/Utopiaidentitydapp/imports/ui/pages/main/result.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/main/result.js"}},"code":"module.link(\"./result.html\");\nmodule.link(\"../../stylesheets/result.css\");\nmodule.link(\"./footer.js\");\nvar ScatterJS;\nmodule.link(\"scatterjs-core\", {\n  \"default\": function (v) {\n    ScatterJS = v;\n  }\n}, 0);\nvar ScatterEOS;\nmodule.link(\"scatterjs-plugin-eosjs\", {\n  \"default\": function (v) {\n    ScatterEOS = v;\n  }\n}, 1);\nvar Eos;\nmodule.link(\"eosjs\", {\n  \"default\": function (v) {\n    Eos = v;\n  }\n}, 2);\nvar network = {\n  protocol: \"https\",\n  // Defaults to https\n  blockchain: \"eos\",\n  host: \"jungle2.cryptolions.io\",\n  port: 443,\n  chainId: \"e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473\"\n};\nvar eosOptions = {\n  chainId: \"e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473\"\n};\nvar scatter = {};\nvar eosinstance = {};\nTemplate.App_result.onCreated(function () {\n  var resultdata;\n  var candidatedata;\n  Meteor.subscribe('identity');\n  ScatterJS.scatter.connect('utopia').then(function (connected) {\n    if (connected) {\n      if (ScatterJS.scatter.connect('utopia')) {\n        scatter = ScatterJS.scatter;\n        var requiredFields = {\n          accounts: [network]\n        };\n        var eos = scatter.eos(network, Eos, eosOptions);\n\n        if (scatter.identity) {\n          eosinstance = eos;\n          var result = [];\n          var length = 0;\n          var id = FlowRouter.current().params.id;\n          console.log(\"id: \", id);\n          eosinstance.getTableRows({\n            code: \"voteproposal\",\n            scope: \"voteproposal\",\n            table: \"votes13\",\n            limit: \"50\",\n            json: true\n            /* key_type: \"i64\",\n            index_position: 2 */\n\n          }).then(function (response) {\n            resultdata = response; //getting the length of list of all choices for a  particular proposal\n\n            var length = 0;\n\n            for (var i = 0; i < resultdata.rows.length; i++) {\n              if (id == resultdata.rows[i].proposal_id) {\n                length = resultdata.rows[i].choices.length;\n                break;\n              }\n            } //creating a 2d array to store who got how many votes based on rank \n\n\n            for (var i = 0; i < length; i++) {\n              result[i] = [];\n            }\n\n            for (var i = 0; i < length; i++) {\n              for (var j = 0; j < length; j++) {\n                result[i][j] = 0;\n              }\n            }\n\n            var input = []; //creating a 2d array of total votes received \n\n            for (var i = 0; i < resultdata.rows.length; i++) {\n              if (id == resultdata.rows[i].proposal_id) {\n                input.push(resultdata.rows[i].choices);\n              }\n            } // calculaing votes based on ranks\n            //j is the candidate and val-1 is the total votes received for the rank\n\n\n            for (var i = 0; i < input.length; i++) {\n              for (j = 0; j < input[i].length; j++) {\n                var val = input[i][j];\n                result[j][val - 1] += 1;\n              }\n            }\n\n            for (var i = 0; i < result.length; i++) {\n              document.getElementById(\"proposal-result-votes\").innerHTML += \"<br><div class = 'ep2'></div>\";\n\n              for (var j = 0; j < result[i].length; j++) {\n                var val = result[i][j];\n                document.getElementsByClassName(\"ep2\")[i].innerHTML += \"<div class = 'vote-stat'>\" + val + \"</div>\";\n              }\n            }\n          });\n          eosinstance.getTableRows({\n            code: \"voteproposal\",\n            scope: \"voteproposal\",\n            table: \"proposal11\",\n            limit: \"50\",\n            json: true\n          }).then(function (response) {\n            candidatedata = response;\n            var candidatelist = [];\n\n            for (var i = 0; i < candidatedata.rows.length; i++) {\n              if (id == candidatedata.rows[i].id) {\n                for (var j = 0; j < candidatedata.rows[i].proposal_options.length; j++) {\n                  var val = candidatedata.rows[i].proposal_options[j];\n                  document.getElementById(\"proposal-result-name\").innerHTML += \"<br><div class = 'ep'>\" + val + \"</div>\";\n                }\n              }\n            }\n          });\n        } else {\n          FlowRouter.go(\"/\");\n        }\n      }\n    } else {\n      console.log(\"scatter not installed\");\n    }\n  });\n});\nTemplate.App_result.events({});","map":{"version":3,"sources":["imports/ui/pages/main/result.js"],"names":["module","link","ScatterJS","v","ScatterEOS","Eos","network","protocol","blockchain","host","port","chainId","eosOptions","scatter","eosinstance","Template","App_result","onCreated","resultdata","candidatedata","Meteor","subscribe","connect","then","connected","requiredFields","accounts","eos","identity","result","length","id","FlowRouter","current","params","console","log","getTableRows","code","scope","table","limit","json","response","i","rows","proposal_id","choices","j","input","push","val","document","getElementById","innerHTML","getElementsByClassName","candidatelist","proposal_options","go","events"],"mappings":"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","sourcesContent":["import \"./result.html\";\nimport \"../../stylesheets/result.css\";\nimport \"./footer.js\";\nimport ScatterJS from \"scatterjs-core\";\nimport ScatterEOS from \"scatterjs-plugin-eosjs\";\nimport Eos from \"eosjs\";\nconst network = {\n  protocol: \"https\", // Defaults to https\n  blockchain: \"eos\",\n  host: \"jungle2.cryptolions.io\",\n  port: 443,\n  chainId: \"e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473\"\n};\nconst eosOptions = {\n  chainId: \"e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473\"\n};\n\nvar scatter={};\nvar eosinstance = {};\nTemplate.App_result.onCreated(function () {\n    let resultdata;\n    let candidatedata;\n  Meteor.subscribe('identity');\n  ScatterJS.scatter.connect('utopia').then((connected) => {\n      if (connected) {\n          if (ScatterJS.scatter.connect('utopia')) {\n              scatter = ScatterJS.scatter;\n              const requiredFields = { accounts: [network] };\n              const eos = scatter.eos(network, Eos, eosOptions);\n              if (scatter.identity) {\n                  eosinstance = eos;\n                  var result = [];\n                  var length = 0;\n                  var id = FlowRouter.current().params.id;\n                  console.log(\"id: \", id);\n                   eosinstance.getTableRows({\n                      code: \"voteproposal\",\n                      scope: \"voteproposal\",\n                      table: \"votes13\",\n                      limit: \"50\",\n                      json: true,\n                      /* key_type: \"i64\",\n                      index_position: 2 */\n                  }).then((response)=>{\n                      resultdata=response;\n                       //getting the length of list of all choices for a  particular proposal\n                  var length = 0;\n                  for (var i = 0; i < resultdata.rows.length; i++) {\n                      if (id == resultdata.rows[i].proposal_id) {\n                          length = resultdata.rows[i].choices.length;\n                          break;\n                      }\n                  }\n              \n                  //creating a 2d array to store who got how many votes based on rank \n                  for (var i = 0; i < length; i++) {\n                      result[i] = [];\n                  }\n              \n                  for (var i = 0; i < length; i++) {\n                      for (var j = 0; j < length; j++) {\n                          result[i][j] = 0;\n                      }\n                  }\n              \n                  var input = [];\n                  //creating a 2d array of total votes received \n                  for (var i = 0; i < resultdata.rows.length; i++) {\n                      if (id == resultdata.rows[i].proposal_id) {\n                          input.push(resultdata.rows[i].choices)\n                      }\n                  }\n              \n                  // calculaing votes based on ranks\n                  //j is the candidate and val-1 is the total votes received for the rank\n                  for (var i = 0; i < input.length; i++) {\n                      for (j = 0; j < input[i].length; j++) {\n                          var val = input[i][j];\n                          result[j][val - 1] += 1;\n                      }\n                  }\n                  for(var i=0;i<result.length;i++){\n                    document.getElementById(\"proposal-result-votes\").innerHTML +=\"<br><div class = 'ep2'></div>\";\n            \n                    for(var j=0;j<result[i].length;j++){\n                        var val = result[i][j]\n                        document.getElementsByClassName(\"ep2\")[i].innerHTML += \"<div class = 'vote-stat'>\"+val+\"</div>\"\n                    }\n                    \n                }\n                  });\n              \n                   eosinstance.getTableRows({\n                      code: \"voteproposal\",\n                      scope: \"voteproposal\",\n                      table: \"proposal11\",\n                      limit: \"50\",\n                      json: true,\n                  }).then((response)=>{\n                    candidatedata=response;\n                    var candidatelist = []\n                  for(var i=0;i<candidatedata.rows.length;i++){\n                      if(id == candidatedata.rows[i].id){\n                          for(var j=0;j<candidatedata.rows[i].proposal_options.length;j++){\n                              var val = candidatedata.rows[i].proposal_options[j]\n                              document.getElementById(\"proposal-result-name\").innerHTML += \"<br><div class = 'ep'>\"+val+\"</div>\"\n                  \n                          }\n                                      \n                      }\n                  }\n                });\n                     \n              } else {\n                  FlowRouter.go(\"/\");\n              }\n          }\n      } else {\n          console.log(\"scatter not installed\")\n      }\n  });\n});\n\nTemplate.App_result.events({\n   \n})\n\n"]},"sourceType":"script","hash":"18de6b3158d320e7db4034720fc8d076eaef75ee"}
